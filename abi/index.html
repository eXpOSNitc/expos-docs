<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="OS Lab website for NIT Calicut"><link href=https://exposnitc.github.io/expos-docs/abi/ rel=canonical><link rel=icon href=../assets/favicon.png><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.10"><title>Application Binary Interface (ABI) - eXpOS NITC</title><link rel=stylesheet href=../assets/stylesheets/main.1fe995fd.min.css><link rel=stylesheet href=../assets/stylesheets/palette.f1a3b89f.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../assets/css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent> <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#xsm-user-level-instruction-set class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-announce> <div class="md-announce__inner md-grid md-typeset"> <b>Site is undergoing migration.</b> Old URL: <a href=https://exposnitc.github.io/abi.html target=_blank rel="nofollow noopener">https://exposnitc.github.io/abi.html</a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="eXpOS NITC" class="md-header__button md-logo" aria-label="eXpOS NITC" data-md-component=logo> <img src=../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> eXpOS NITC </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Application Binary Interface (ABI) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/eXpOSNitc/expos-docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> eXpOSNitc/expos-docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../documentation/ class="md-tabs__link md-tabs__link--active"> Documentation </a> </li> <li class=md-tabs__item> <a href=../roadmap/ class=md-tabs__link> Roadmap </a> </li> <li class=md-tabs__item> <a href=../faq/ class=md-tabs__link> FAQ </a> </li> <li class=md-tabs__item> <a href=../feedback/ class=md-tabs__link> Student Feedback </a> </li> <li class=md-tabs__item> <a href=https://exposnitc.github.io/user-contrib/ target=_blank class=md-tabs__link> User Contributions </a> </li> <li class=md-tabs__item> <a href=../about/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=http://xosnitc.github.io target=_blank class=md-tabs__link> XOS </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="eXpOS NITC" class="md-nav__button md-logo" aria-label="eXpOS NITC" data-md-component=logo> <img src=../assets/logo.png alt=logo> </a> eXpOS NITC </label> <div class=md-nav__source> <a href=https://github.com/eXpOSNitc/expos-docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> eXpOSNitc/expos-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Documentation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Documentation data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../documentation/ class=md-nav__link> Documentation </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> Operating System <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operating System" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Operating System </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_1 type=checkbox id=__nav_2_2_1> <label class=md-nav__link for=__nav_2_2_1> Specification <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Specification data-md-level=3> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> Specification </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../os-spec/ class=md-nav__link> Specification </a> </li> <li class=md-nav__item> <a href=../os-spec/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../os-spec/expos-abstractions/ class=md-nav__link> eXpOS Abstractions </a> </li> <li class=md-nav__item> <a href=../os-spec/expfs/ class=md-nav__link> The Logical File System eXpFS </a> </li> <li class=md-nav__item> <a href=../os-spec/processmodel/ class=md-nav__link> Process Model </a> </li> <li class=md-nav__item> <a href=../os-spec/synchronization/ class=md-nav__link> Synchronization and Access Control </a> </li> <li class=md-nav__item> <a href=../os-spec/misc/ class=md-nav__link> Micellaneous </a> </li> <li class=md-nav__item> <a href=../os-spec/multiuser/ class=md-nav__link> Multi-User Extension to eXpOS </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_1_9 type=checkbox id=__nav_2_2_1_9> <label class=md-nav__link for=__nav_2_2_1_9> Application Programmer's Interface (API) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Programmer's Interface (API)" data-md-level=4> <label class=md-nav__title for=__nav_2_2_1_9> <span class="md-nav__icon md-icon"></span> Application Programmer's Interface (API) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../os-spec/systemcallinterface/ class=md-nav__link> High Level System Call Interface </a> </li> <li class=md-nav__item> <a href=../os-spec/dynamicmemoryroutines/ class=md-nav__link> High Level Library Interface </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../os-spec/shell-spec/ class=md-nav__link> eXpOS Shell Specification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_2 type=checkbox id=__nav_2_2_2> <label class=md-nav__link for=__nav_2_2_2> Design <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Design data-md-level=3> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../os-design/ class=md-nav__link> Design </a> </li> <li class=md-nav__item> <a href=../os-design/misc/ class=md-nav__link> Micellaneous </a> </li> <li class=md-nav__item> <a href=../os-design/exe-handler/ class=md-nav__link> Exception Handler </a> </li> <li class=md-nav__item> <a href=../os-design/timer/ class=md-nav__link> Timer </a> </li> <li class=md-nav__item> <a href=../os-design/disk-interrupt/ class=md-nav__link> Disk Interrupt Handler </a> </li> <li class=md-nav__item> <a href=../os-design/term-handler/ class=md-nav__link> Terminal Interrupt Handler </a> </li> <li class=md-nav__item> <a href=../os-design/shutdown/ class=md-nav__link> Shutdown </a> </li> <li class=md-nav__item> <a href=../os-design/create/ class=md-nav__link> Create </a> </li> <li class=md-nav__item> <a href=../os-design/delete/ class=md-nav__link> Delete </a> </li> <li class=md-nav__item> <a href=../os-design/open/ class=md-nav__link> Open </a> </li> <li class=md-nav__item> <a href=../os-design/close/ class=md-nav__link> Close </a> </li> <li class=md-nav__item> <a href=../os-design/read/ class=md-nav__link> Read </a> </li> <li class=md-nav__item> <a href=../os-design/write/ class=md-nav__link> Write </a> </li> <li class=md-nav__item> <a href=../os-design/seek/ class=md-nav__link> Seek </a> </li> <li class=md-nav__item> <a href=../os-design/fork/ class=md-nav__link> Fork </a> </li> <li class=md-nav__item> <a href=../os-design/exec/ class=md-nav__link> Exec </a> </li> <li class=md-nav__item> <a href=../os-design/exit/ class=md-nav__link> Exit </a> </li> <li class=md-nav__item> <a href=../os-design/proc-misc/ class=md-nav__link> Process Micellaneous </a> </li> <li class=md-nav__item> <a href=../os-design/synchronization-algos/ class=md-nav__link> Synchronization Algorithms </a> </li> <li class=md-nav__item> <a href=../os-design/semaphore-algos/ class=md-nav__link> Semaphore Algorithms </a> </li> <li class=md-nav__item> <a href=../os-design/multiusersyscalls/ class=md-nav__link> Multi-User System Calls </a> </li> <li class=md-nav__item> <a href=../os-design/disk-ds/ class=md-nav__link> Disk Data Structures </a> </li> <li class=md-nav__item> <a href=../os-design/process-table/ class=md-nav__link> Process Table </a> </li> <li class=md-nav__item> <a href=../os-design/mem-ds/ class=md-nav__link> Memory Data Structures </a> </li> <li class=md-nav__item> <a href=../os-design/state-diag/ class=md-nav__link> Process State Diagram </a> </li> <li class=md-nav__item> <a href=../os-design/nexpos/ class=md-nav__link> NeXpOS Design </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3 type=checkbox id=__nav_2_2_3> <label class=md-nav__link for=__nav_2_2_3> Implementation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Implementation data-md-level=3> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Implementation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../os-implementation/ class=md-nav__link> Implementation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3_2 type=checkbox id=__nav_2_2_3_2> <label class=md-nav__link for=__nav_2_2_3_2> Kernel Stack Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Kernel Stack Management" data-md-level=4> <label class=md-nav__title for=__nav_2_2_3_2> <span class="md-nav__icon md-icon"></span> Kernel Stack Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../os-design/stack-smcall/ class=md-nav__link> During System Calls </a> </li> <li class=md-nav__item> <a href=../os-design/stack-interrupt/ class=md-nav__link> During Hardware interrupts or exceptions </a> </li> <li class=md-nav__item> <a href=../os-design/stack-module/ class=md-nav__link> During Module calls </a> </li> <li class=md-nav__item> <a href=../os-design/timer-stack-management/ class=md-nav__link> During Context Switch </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_1 type=checkbox id=__nav_2_3_1> <label class=md-nav__link for=__nav_2_3_1> Specification <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Specification data-md-level=3> <label class=md-nav__title for=__nav_2_3_1> <span class="md-nav__icon md-icon"></span> Specification </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../arch-spec/ class=md-nav__link> XSM Architecture Specifcation </a> </li> <li class=md-nav__item> <a href=../virtual-machine-spec/ class=md-nav__link> Virtual Machine Model </a> </li> <li class=md-nav__item> <a href=../arch-spec/machine-organization/ class=md-nav__link> Machine Organisation </a> </li> <li class=md-nav__item> <a href=../arch-spec/interrupts-exception-handling/ class=md-nav__link> Interrupts and Exception Handling </a> </li> <li class=md-nav__item> <a href=../arch-spec/instruction-set/ class=md-nav__link> Instruction Set </a> </li> <li class=md-nav__item> <a href=../arch-spec/paging-hardware/ class=md-nav__link> Paging Hardware and Address Translation </a> </li> <li class=md-nav__item> <a href=../arch-spec/nexsm/ class=md-nav__link> NEXSM (Two Core) Architecture Specification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_2 type=checkbox id=__nav_2_3_2> <label class=md-nav__link for=__nav_2_3_2> Modules <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Modules data-md-level=3> <label class=md-nav__title for=__nav_2_3_2> <span class="md-nav__icon md-icon"></span> Modules </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../modules/ class=md-nav__link> Modules </a> </li> <li class=md-nav__item> <a href=../modules/module-00/ class=md-nav__link> Module 0 </a> </li> <li class=md-nav__item> <a href=../modules/module-01/ class=md-nav__link> Module 1 </a> </li> <li class=md-nav__item> <a href=../modules/module-02/ class=md-nav__link> Module 2 </a> </li> <li class=md-nav__item> <a href=../modules/module-03/ class=md-nav__link> Module 3 </a> </li> <li class=md-nav__item> <a href=../modules/module-04/ class=md-nav__link> Module 4 </a> </li> <li class=md-nav__item> <a href=../modules/module-05/ class=md-nav__link> Module 5 </a> </li> <li class=md-nav__item> <a href=../modules/module-06/ class=md-nav__link> Module 6 </a> </li> <li class=md-nav__item> <a href=../modules/module-07/ class=md-nav__link> Module 7 </a> </li> <li class=md-nav__item> <a href=../modules/module-08/ class=md-nav__link> Module 8 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_3 type=checkbox id=__nav_2_3_3> <label class=md-nav__link for=__nav_2_3_3> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../tutorials/multiuser-implementation/ class=md-nav__link> MultiUser Implementation </a> </li> <li class=md-nav__item> <a href=../tutorials/filesystem-implementation/ class=md-nav__link> FileSystem Implementation </a> </li> <li class=md-nav__item> <a href=../tutorials/process-management-implementation/ class=md-nav__link> Process Management Implementation </a> </li> <li class=md-nav__item> <a href=../tutorials/xsm-instruction-cycle/ class=md-nav__link> XSM Instruction Cycle </a> </li> <li class=md-nav__item> <a href=../tutorials/xsm-interrupts-tutorial/ class=md-nav__link> XSM Interrupts tutorial </a> </li> <li class=md-nav__item> <a href=../tutorials/xsm-unprivileged-tutorial/ class=md-nav__link> XSM Unprivileged tutorial </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_4 type=checkbox id=__nav_2_3_4> <label class=md-nav__link for=__nav_2_3_4> Support Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Support Tools" data-md-level=3> <label class=md-nav__title for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> Support Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../support-tools/setting-up/ class=md-nav__link> Setting up </a> </li> <li class=md-nav__item> <a href=../support-tools/docker-setup/ class=md-nav__link> Docker based setup </a> </li> <li class=md-nav__item> <a href=../support-tools/xfs-interface/ class=md-nav__link> XFS Interface </a> </li> <li class=md-nav__item> <a href=../support-tools/spl/ class=md-nav__link> SPL </a> </li> <li class=md-nav__item> <a href=../support-tools/expl/ class=md-nav__link> ExpL </a> </li> <li class=md-nav__item> <a href=../support-tools/xsm-simulator/ class=md-nav__link> XSM Simulator </a> </li> <li class=md-nav__item> <a href=../support-tools/constants/ class=md-nav__link> Constants </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_5 type=checkbox id=__nav_2_3_5 checked> <label class=md-nav__link for=__nav_2_3_5> Application Interface <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Interface" data-md-level=3> <label class=md-nav__title for=__nav_2_3_5> <span class="md-nav__icon md-icon"></span> Application Interface </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=./ class=md-nav__link> Application Binary Interface (ABI) </a> </li> <li class=md-nav__item> <a href=../os-design/sw-interface/ class=md-nav__link> Low Level System Call Interface </a> </li> <li class=md-nav__item> <a href=../os-spec/dynamicmemoryroutines/ class=md-nav__link> High Level Library Interface </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Low Level Library Interface <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Low Level Library Interface </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#xsm-user-level-instruction-set class=md-nav__link> XSM User Level Instruction Set </a> </li> <li class=md-nav__item> <a href=#virtual-address-space-model class=md-nav__link> Virtual Address Space Model </a> </li> <li class=md-nav__item> <a href=#xexe-executable-file-format class=md-nav__link> XEXE Executable File Format </a> </li> <li class=md-nav__item> <a href=#low-level-system-call-interface class=md-nav__link> Low Level System Call Interface </a> <nav class=md-nav aria-label="Low Level System Call Interface"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#system-calls class=md-nav__link> System Calls </a> <nav class=md-nav aria-label="System Calls"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#invoking-a-system-call class=md-nav__link> Invoking a system call </a> </li> <li class=md-nav__item> <a href=#after-return-from-the-system-call class=md-nav__link> After return from the system call </a> </li> <li class=md-nav__item> <a href=#system-calls-and-their-translation class=md-nav__link> System calls and their translation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#low-level-runtime-library-interface class=md-nav__link> Low Level Runtime Library Interface </a> <nav class=md-nav aria-label="Low Level Runtime Library Interface"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#invoking-a-library-module class=md-nav__link> Invoking a library module </a> </li> <li class=md-nav__item> <a href=#after-return-from-the-library-module class=md-nav__link> After return from the library module </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> Others <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Others data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Others </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4_1 type=checkbox id=__nav_2_4_1> <label class=md-nav__link for=__nav_2_4_1> Test Programs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Test Programs" data-md-level=3> <label class=md-nav__title for=__nav_2_4_1> <span class="md-nav__icon md-icon"></span> Test Programs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../test-programs/ class=md-nav__link> Test Programs </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-01/ class=md-nav__link> Program 1 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-02/ class=md-nav__link> Program 2 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-03/ class=md-nav__link> Program 3 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-04/ class=md-nav__link> Program 4 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-05/ class=md-nav__link> Program 5 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-06/ class=md-nav__link> Program 6 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-07/ class=md-nav__link> Program 7 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-08/ class=md-nav__link> Program 8 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-09/ class=md-nav__link> Program 9 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-10/ class=md-nav__link> Program 10 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-11/ class=md-nav__link> Program 11 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-12/ class=md-nav__link> Program 12 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-13/ class=md-nav__link> Program 13 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-14/ class=md-nav__link> Program 14 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-15/ class=md-nav__link> Program 15 </a> </li> <li class=md-nav__item> <a href=../test-programs/test-program-16/ class=md-nav__link> Program 16 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Roadmap <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Roadmap data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roadmap/ class=md-nav__link> Roadmap </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Preparatory Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Preparatory Stages" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Preparatory Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roadmap/stage-01/ class=md-nav__link> Stage 1 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-02/ class=md-nav__link> Stage 2 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-03/ class=md-nav__link> Stage 3 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-04/ class=md-nav__link> Stage 4 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-05/ class=md-nav__link> Stage 5 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-06/ class=md-nav__link> Stage 6 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-07/ class=md-nav__link> Stage 7 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-08/ class=md-nav__link> Stage 8 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-09/ class=md-nav__link> Stage 9 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-10/ class=md-nav__link> Stage 10 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-11/ class=md-nav__link> Stage 11 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-12/ class=md-nav__link> Stage 12 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Intermediate Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Intermediate Stages" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Intermediate Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roadmap/stage-13/ class=md-nav__link> Stage 13 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-14/ class=md-nav__link> Stage 14 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-15/ class=md-nav__link> Stage 15 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-16/ class=md-nav__link> Stage 16 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-17/ class=md-nav__link> Stage 17 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-18/ class=md-nav__link> Stage 18 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-19/ class=md-nav__link> Stage 19 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Final Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Final Stages" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Final Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roadmap/stage-20/ class=md-nav__link> Stage 20 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-21/ class=md-nav__link> Stage 21 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-22/ class=md-nav__link> Stage 22 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-23/ class=md-nav__link> Stage 23 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-24/ class=md-nav__link> Stage 24 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-25/ class=md-nav__link> Stage 25 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-26/ class=md-nav__link> Stage 26 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-27/ class=md-nav__link> Stage 27 </a> </li> <li class=md-nav__item> <a href=../roadmap/stage-28/ class=md-nav__link> Stage 28 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../faq/ class=md-nav__link> FAQ </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Student Feedback <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Student Feedback" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Student Feedback </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../feedback/ class=md-nav__link> Student Feedback </a> </li> <li class=md-nav__item> <a href=../feedback/nitc21/ class=md-nav__link> NIT-C 2021 </a> </li> <li class=md-nav__item> <a href=../feedback/nitc20/ class=md-nav__link> NIT-C 2020 </a> </li> <li class=md-nav__item> <a href=../feedback/nitc19/ class=md-nav__link> NIT-C 2019 </a> </li> <li class=md-nav__item> <a href=../feedback/iitpkd18/ class=md-nav__link> IIT PKD 2018 </a> </li> <li class=md-nav__item> <a href=../feedback/nitc18/ class=md-nav__link> NIT-C 2018 </a> </li> <li class=md-nav__item> <a href=../feedback/analysis/ class=md-nav__link> Analysis of Student Feedback </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://exposnitc.github.io/user-contrib/ target=_blank class=md-nav__link> User Contributions </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../about/ class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../reports/ class=md-nav__link> Project Reports </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=http://xosnitc.github.io target=_blank class=md-nav__link> XOS </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#xsm-user-level-instruction-set class=md-nav__link> XSM User Level Instruction Set </a> </li> <li class=md-nav__item> <a href=#virtual-address-space-model class=md-nav__link> Virtual Address Space Model </a> </li> <li class=md-nav__item> <a href=#xexe-executable-file-format class=md-nav__link> XEXE Executable File Format </a> </li> <li class=md-nav__item> <a href=#low-level-system-call-interface class=md-nav__link> Low Level System Call Interface </a> <nav class=md-nav aria-label="Low Level System Call Interface"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#system-calls class=md-nav__link> System Calls </a> <nav class=md-nav aria-label="System Calls"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#invoking-a-system-call class=md-nav__link> Invoking a system call </a> </li> <li class=md-nav__item> <a href=#after-return-from-the-system-call class=md-nav__link> After return from the system call </a> </li> <li class=md-nav__item> <a href=#system-calls-and-their-translation class=md-nav__link> System calls and their translation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#low-level-runtime-library-interface class=md-nav__link> Low Level Runtime Library Interface </a> <nav class=md-nav aria-label="Low Level Runtime Library Interface"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#invoking-a-library-module class=md-nav__link> Invoking a library module </a> </li> <li class=md-nav__item> <a href=#after-return-from-the-library-module class=md-nav__link> After return from the library module </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <!-- Edit button --> <a href=https://github.com/eXpOSNitc/expos-docs/edit/main/docs/abi.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <!--
    Hack: check whether the content contains a h1 headline. If it
    doesn't, the page title (or respectively site name) is used
    as the main headline.
    --> <h1>Application Binary Interface (ABI)</h1> <!-- Markdown content --> <p>An application binary interface (ABI) is the interface between a user program and the kernel.</p> <p>The eXpOS ABI defines the following:</p> <ul> <li> <p>The <strong>machine model</strong> - that is, the instruction set and the virtual memory address space to which an application/compiler generating executable file must generate target code for. This is very much architecture specific.</p> </li> <li> <p>A logical division of the memory address space into <strong>regions</strong> - <em>text, stack, heap and library</em> and the low level (assembly/machine level) system call interface. This part is dependent on both the OS and the architecture.</p> </li> <li> <p>The <strong>file format</strong> to be followed for executable files by the compiler (the XEXE executable file format). This part is generally OS specific and architecture independent. Compilers must generate executable files adhering to this format.</p> </li> <li> <p>A <strong>low level system call interface</strong> which gives the specification of the software interrupt instruction (trap) corresponding to each system call and the order in which arguments must be passed to the system call through the application program's stack.This part is architecture dependent.</p> </li> <li> <p>The <strong>low level runtime library interface :</strong> The low level runtime library interface consists of user level routines which provide a layer of abstraction between the low level system call interface and the application program by providing a unified interface for all system calls, hiding low level interrupt details from the application. (Applications however, may choose to bypass this layer and directly invoke the low level system calls.) In addition to the system call interface, application level dynamic memory allocator and deallocator functions are also part of the eXpOS library.</p> </li> </ul> <h3 id=xsm-user-level-instruction-set>XSM User Level Instruction Set<a class=headerlink href=#xsm-user-level-instruction-set title="Permanent link">&para;</a></h3> <p>XSM Instruction set describes the target language in which a compiler must generate an executable file. Instructions are classified into privileged and unprivileged instructions. Since application programs run in the user mode, they can make use of only unprivileged instructions.</p> <p>You can read more about the XSM user level instruction set <a href=../virtual-machine-spec/ >here</a>.</p> <h3 id=virtual-address-space-model>Virtual Address Space Model<a class=headerlink href=#virtual-address-space-model title="Permanent link">&para;</a></h3> <p>The (virtual) address space of any eXpOS process is logically divided into four parts namely <em>Shared Library, Heap, Code and Stack</em>. </p> <p><img alt src=../assets/img/process_model.png></p> <p><strong>Shared library</strong> can be shared by more than one executable file. The maximum size of this memory region is X_LSIZE.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>eXpOS provides a library that provides a unified interface for system calls and dynamic memory allocation/deallocation routines. The library is pre-loaded into memory at the time of OS startup and is linked to the address space of a process when an executable program is loaded into the memory for execution if required (as determined by the Library flag in the <a href=./#xexe-executable-file-format>executable file</a>) . The eXpOS implementation for the XSM architecture discussed here sets X_LSIZE to 1024 words. Thus the shared library will be loaded into the region between memory addresses 0 and 1023 in the address space of the process.</p> </div> <p><strong>Heap</strong> is the portion of the address space of a process reserved as the memory pool from which dynamic memory allocation is done by the allocator routines in the shared library (for example, memory allocated via malloc in C). The maximum size of this memory region is X_HSIZE. Library functions access this portion of memory for dynamic memory allocation and deallocation. The eXpOS execution semantics specify that when a process executes the Fork system call, this region will be shared between the parent process and the child process. The eXpOS implementation for the XSM architecture discussed here sets X_HSIZE to 1024 words. Thus the heap region will be between memory addresses 1024 and 2047 in the address space of the process.</p> <p><strong>Code</strong> contains the header and code part of the XEXE executable file, which is loaded by the eXpOS loader from the file system when the Exec system call is executed. The first eight words of the executable file contains the header. The rest of the code region contains the XSM instructions. The total size of code section cannot exceed X_CSIZE. The eXpOS implementation for the XSM architecture discussed here sets X_CSIZE to 2048 words. Hence, the code region will be between memory addressess 2048 and 4095 in the address space of the process.</p> <p><strong>Stack</strong> is the space reserved for the runtime stack of the process. Parameters and local variables associated with functions in a program are allocated in the stack. In the XSM architecture, the stack grows upwards and the maximum stack size is X_SSIZE. Global variables are normally allocated in the stack as the executable file format does not support a separate <a href=https://en.wikipedia.org/wiki/Data_segment>Data region</a>. The eXpOS implementation for the XSM architecture discussed here sets X_SIZE to 1024 words.Thus the stack will occupy the region between memory address 4096 and 5119 in the address space of the process.</p> <p>A description of the user level address space provided by XSM is given <a href=../virtual-machine-spec/ >here</a>.</p> <h3 id=xexe-executable-file-format>XEXE Executable File Format<a class=headerlink href=#xexe-executable-file-format title="Permanent link">&para;</a></h3> <p>Executable files in eXpOS must be in the <a href=../os-spec/expfs/ >XEXE format</a> as eXpOS executes only files of such format.</p> <p>An XEXE executable file in eXpOS consists of two parts:</p> <ul> <li>1. Header</li> <li>2. Code</li> </ul> <p><img alt src=../assets/img/exe_file.jpeg></p> <p>The maximum size of the file (including the header) is limited by the constant EXE_SIZE. The eXpOS implementation for the XSM architecture discussed here sets EXE_SIZE to 2048 words.</p> <p>The first eight words of an executable file are reserved for the header which describes the features of file. The structure of the header is :</p> <p><img alt src=../assets/img/header.png></p> <p><strong>XMAGIC</strong> is a number indicating the type of executable file. All XEXE files will have magic number 0. For more on Magic Number, click <a href=https://en.wikipedia.org/wiki/File_format#Magic_number>here</a>.</p> <p><strong>Entry point</strong> contains the virtual address in memory of the first instruction to be executed (entry point) of the program after the OS loader has loaded it. During loading, the program counter must be initialized to this address.</p> <p><strong>Text Size</strong>, <strong>Data Size</strong>, <strong>Heap Size</strong> and <strong>Stack size</strong> indicates the sizes of Text, Data, Heap and Stack regions to be allocated by the OS loader when the file is loaded for execution.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The present eXpOS virtual address space model requires that the data and stack must be in the same memory area and must be managed by the compiler / application program (this means that the program must contain the code to initialize the value of the stack pointer). The value of Data Size field is ignored. Moreover, the eXpOS loader (<a href=../os-spec/systemcallinterface/#process-system-calls>exec system call</a>) sets the size of text region to 2048 words and stack region to 1024 words in memory irrespective of the values present in the header.</p> </div> <p>If the <strong>Runtime Library</strong> must be included when the file is loaded, the Library Flag is set to 1 in the executable file. If this flag is not set then neither memory is allocated for the heap nor the library linked to the address space of the process by the eXpOS loader at execution time.</p> <p>In summary, the eXpOS loader maps an executable file into its virtual address according to the following table :</p> <table> <thead> <tr> <th>Region</th> <th>Start Address</th> <th>End Address</th> </tr> </thead> <tbody> <tr> <td>Library*</td> <td>0</td> <td>1023</td> </tr> <tr> <td>Heap*</td> <td>1024</td> <td>2047</td> </tr> <tr> <td>Code**</td> <td>2048</td> <td>4095</td> </tr> <tr> <td>Stack†</td> <td>4096</td> <td>5119</td> </tr> </tbody> </table> <p>* If Library Flag is set to 1 in the executable header.</p> <p>** The eXpOS loader sets IP to the value specified in the program header.</p> <p>† The eXpOS loader does not gurentee that the values of SP and BP are initialised to the base address of the stack region. Hence the executable program must contain code to initialise these registers.</p> <h3 id=low-level-system-call-interface>Low Level System Call Interface<a class=headerlink href=#low-level-system-call-interface title="Permanent link">&para;</a></h3> <p>The <strong>Low level system call interface</strong> describes the conventions to be followed by application programs that invoke <a href=../os-spec/systemcallinterface/ >eXpOS system calls</a> on the XSM architecture. The interface describes the software interrupt instruction (trap) corresponding to each system call and the calling conventions for passing arguments and extracting return values of the system call through the application program's stack. This part is architecture dependent.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If a high level language like <a href=https://silcnitc.github.io>ExpL</a> is used for writing application programs, then the application programs will be using the <a href=../os-spec/dynamicmemoryroutines/ >high level library interface</a> for invoking system calls. The ExpL compiler is responsible for generating assembly language code to translate the call to a corresponding library call using the low level library interface. The ExpL library which is pre-loaded into the system memory during eXpOS boot up contains assembly language code that redirects the library call to the corresponding eXpOS system call using the low level system call interface described here. If you write assembly language application programs as user programs, then you can use the low level system call interface directly bye-passing the library.</p> </div> <h4 id=system-calls>System Calls<a class=headerlink href=#system-calls title="Permanent link">&para;</a></h4> <p>For an application program, there are two stages in executing a system call:</p> <p>1) <strong>Before the system call</strong> : The calling application must set up the arguments in the (user) stack before executing the trap instruction.</p> <div class="admonition note"> <p class=admonition-title>Important Note</p> <p>The calling application is supposed to save its register context into the stack before making a system call.The system call is not expected to save the user context of the calling application. However, the <a href=https://silcnitc.github.io/run_data_structures/run-time-stack.html>ExpL calling convention</a>(unfortunately) does not save the Base Pointer Register (BP) before the call. Hence, the OS implementation must be careful to save the value of the register.</p> </div> <p>2) <strong>After the system call</strong> : The return value of the system call must be extracted from the stack.</p> <h5 id=invoking-a-system-call>Invoking a system call<a class=headerlink href=#invoking-a-system-call title="Permanent link">&para;</a></h5> <p>A user program invokes a system call by first pushing the system call number and then the arguments into the stack and then invoking the <strong>INT</strong> machine instruction corresponding to the system call. The eXpOS ABI stipulates that the number of arguments pushed into the stack is fixed at three.</p> <pre><code>
PUSH System_Call_Number     // Push system call number
PUSH Argument_1             // Push argument 1 to the stack
PUSH Argument_2             // Push argument 2 to the stack
PUSH Argument_3             // Push argument 3 to the stack
<b>PUSH R0                     // Push an empty space for RETURN VALUE</b>
INT number                  // Invoke the corresponding INT instruction.
                            // The number can be any number between 4 and 18
</code></pre> <p>A system call invocation using the high level application programmer's interface of a programming language like ExpL compiles to a set of machine instructions (see the instructions to the left). They are the stack operations that must be performed by the user program before the INT instruction is executed.</p> <!-- IMAGE --> <p><img align=left alt src=../assets/img/system_call_stack1.png width=40%> The arguments must be pushed into the stack in such a way that the last argument comes on the top. An additional push instruction ('PUSH R0') is inserted to have an empty space in the stack for the return value. The system call implementation must ensure that the return value is stored in this space. The system call number is also pushed to the stack. The interrupt routine needs this value to identify the system call. The figure to the left shows the data stored in process stack just before an INT instruction.</p> <!-- IMAGE LEFT  --> <p><img align=right alt src=../assets/img/system_call_stack2.png width=40%> The INT instruction in XSM will push the value of IP + 2 on to the stack. This is the address of the instruction immediately following the INT instruction in the user program. Each instruction is 2 words, hence IP is incremented by 2. Upon execution of the IRET instruction from the system call, execution resumes from this value of IP. The INT instruction changes mode from <strong>User</strong> mode to <strong>Kernel</strong> mode and passes control to the Interrupt Routine corresponding to the system call. The figure to the right shows the contents of the stack immediately after the execution of the INT instruction.</p> <h5 id=after-return-from-the-system-call>After return from the system call<a class=headerlink href=#after-return-from-the-system-call title="Permanent link">&para;</a></h5> <p>The IRET instruction transfers control back to the user program to the instruction immediately following the INT instruction. The following machine instructions are present after the INT instruction in the ExpL compiled machine code given in the previous step. <div class=highlight><pre><span></span><code>POP Ri           // Pop and save the return value into some register Ri
POP Rj           // Pop and discard argument 3
POP Rj           // Pop and discard argument 2
POP Rj           // Pop and discard argument 1
POP Rj           // Pop and discard the system call number
// Now the stack is popped back to the state before call
</code></pre></div> The machine code to the left pops the values from the stack. The system call number and arguments were inputs to the system call and hence they may be discarded now. The return value which is stored in the stack by the system call is fetched and used by the user program by popping out to some register.</p> <h5 id=system-calls-and-their-translation>System calls and their translation<a class=headerlink href=#system-calls-and-their-translation title="Permanent link">&para;</a></h5> <p>Associated with each system call, there is a system call number and interrupt routine number. The system call number is used to identify a system call. The interrupt routine number denotes the number of the interrupt routine which handles the system call. An interrupt routine may handle more than one system call.</p> <p><strong>Mapping of system calls to interrupt numbers and corresponding system call interface specification with details of arguments and return values of system calls are given in the <a href=../os-design/sw-interface/ >eXpOS Low Level System Call Interface</a> Documentation.</strong></p> <h3 id=low-level-runtime-library-interface>Low Level Runtime Library Interface<a class=headerlink href=#low-level-runtime-library-interface title="Permanent link">&para;</a></h3> <p>The eXpOS library consists of a collection of user level routines provided as part of the operating system. These routines are loaded to the memory during OS start up and can be linked to the address space of any user process by the OS loader (exec system call). The OS loader will link these routines to the shared library region of the address space (see address space) if the library flag in the header of the executable file being loaded is set to 1 (see xexe).</p> <p>The library provides a <strong>uniform interface</strong> through which an application program can invoke system calls and dynamic memory allocation / deallocation routines by providing the function code and the arguments. The interface hides the details of the interrupt service routines corresponding to the <strong>system calls</strong> from the application, thereby making them architecture independent. The library also provides user level routines for <strong>dynamic memory management (allocation and de-allocation)</strong> from the <em>heap region</em> of the application.</p> <p><img alt src=../assets/img/memory_management.png> </p> <p>The library routine is linked to <strong>virtual address 0</strong> of the address space of a process by the OS loader and requires four arguments (function code and three arguments to the system call / memory management routine) to be passed through the stack. The routine invokes the corresponding low level system call / memory management routine and returns to the user program the return value of the system call / memory management routine through the stack. The figure to the side shows the contents of the stack immediately before a call to this library routine.</p> <p>The invocation details for the system calls and the dynamic memory management routines using the library interface can be seen in the <a href=../os-spec/dynamicmemoryroutines/ ><strong>eXpOS High Level Library Interface</strong></a> documentation.</p> <h4 id=invoking-a-library-module>Invoking a library module<a class=headerlink href=#invoking-a-library-module title="Permanent link">&para;</a></h4> <pre><code>
PUSH Function_Code          // Push Function Code
PUSH Argument_1             // Push argument 1 to the stack
PUSH Argument_2             // Push argument 2 to the stack
PUSH Argument_3             // Push argument 3 to the stack
<b>PUSH R0                  // Push an empty space for RETURN VALUE</b>
CALL 0                      // Pass the control to virtual address 0.
// (eXpOS loader links the library to virtual address 0)
</code></pre> <p>A library module invocation using the high level application programmer's interface of a programming language like ExpL compiles to a set of machine instructions (see the instructions to the right). They are the stack operations that must be performed by the user program before the CALL instruction is executed.</p> <h4 id=after-return-from-the-library-module>After return from the library module<a class=headerlink href=#after-return-from-the-library-module title="Permanent link">&para;</a></h4> <p>The following machine instructions are present after the CALL instruction in the ExpL compiled machine code given in the previous step. <div class=highlight><pre><span></span><code>POP Ri           // Pop and save the return value into some register Ri
POP Rj           // Pop and discard argument 3
POP Rj           // Pop and discard argument 2
POP Rj           // Pop and discard argument 1
POP Rj           // Pop and discard the function code
// Now the stack is popped back to the state before call
</code></pre></div> The machine code to the left pops the values from the stack. The function code and arguments were inputs to the library module and hence they may be discarded now. The return value which is stored in the stack by the system call is fetched and used by the user program by popping out to some register.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If application programs are written in a high level language like ExpL, the <a href=../os-spec/dynamicmemoryroutines/ >exposcall()</a> function will be used to make system calls/invoke dynamic memory routines. The programmer does not have to worry about the library interface specified here because the ExpL compiler will automatically generate assembly code that translate the high level call to a low level call to the library using the above interface and retrieve return values from the call. eXpOS pre-loads the library into the memory at boot time. The library re-directs system call requests to the OS through the low level system call interface. Dynamic memory mangement functions are implemented as part of the library itself.</p> </div> <!-- Last update of source file --> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../os-spec/dynamicmemoryroutines/ class="md-footer__link md-footer__link--prev" aria-label="Previous: High Level Library Interface" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> High Level Library Interface </div> </div> </a> <a href=../test-programs/ class="md-footer__link md-footer__link--next" aria-label="Next: Test Programs" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Test Programs </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> National Insititute of Technology, Calicut <br> <a href=https://creativecommons.org/licenses/by-nc/4.0/ rel=license> <img alt="Creative Commons License" style=border-width:0 src=https://licensebuttons.net/l/by-nc/4.0/80x15.png> </a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/exposnitc target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://groups.google.com/g/xos-users target=_blank rel=noopener title=groups.google.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 488 512"><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.top", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script> <script src=../assets/javascripts/bundle.ddd52ceb.min.js></script> </body> </html>
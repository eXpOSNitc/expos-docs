<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="OS Lab website for NIT Calicut"><link href=https://exposnitc.github.io/expos-docs/roadmap/stage-24/ rel=canonical><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.10"><title>Stage 24 : File Read (12 Hours) - eXpOS NITC</title><link rel=stylesheet href=../../assets/stylesheets/main.1fe995fd.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.f1a3b89f.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/css/extra.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#interrupt-routine-5 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-announce> <div class="md-announce__inner md-grid md-typeset"> <b>Site is undergoing migration.</b> Old URL: <a href=https://exposnitc.github.io/Roadmap.html target=_blank rel="nofollow noopener">https://exposnitc.github.io/Roadmap.html</a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="eXpOS NITC" class="md-header__button md-logo" aria-label="eXpOS NITC" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> eXpOS NITC </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Stage 24 : File Read (12 Hours) </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/eXpOSNitc/expos-docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> eXpOSNitc/expos-docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../documentation/ class=md-tabs__link> Documentation </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Roadmap </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> FAQ </a> </li> <li class=md-tabs__item> <a href=../../feedback/ class=md-tabs__link> Student Feedback </a> </li> <li class=md-tabs__item> <a href=https://exposnitc.github.io/user-contrib/ target=_blank class=md-tabs__link> User Contributions </a> </li> <li class=md-tabs__item> <a href=../../about/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=http://xosnitc.github.io target=_blank class=md-tabs__link> XOS </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="eXpOS NITC" class="md-nav__button md-logo" aria-label="eXpOS NITC" data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> eXpOS NITC </label> <div class=md-nav__source> <a href=https://github.com/eXpOSNitc/expos-docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> eXpOSNitc/expos-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Documentation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Documentation data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../documentation/ class=md-nav__link> Documentation </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2 type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2> Operating System <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Operating System" data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Operating System </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_1 type=checkbox id=__nav_2_2_1> <label class=md-nav__link for=__nav_2_2_1> Specification <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Specification data-md-level=3> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> Specification </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../os-spec/ class=md-nav__link> Specification </a> </li> <li class=md-nav__item> <a href=../../os-spec/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../os-spec/expos-abstractions/ class=md-nav__link> eXpOS Abstractions </a> </li> <li class=md-nav__item> <a href=../../os-spec/expfs/ class=md-nav__link> The Logical File System eXpFS </a> </li> <li class=md-nav__item> <a href=../../os-spec/processmodel/ class=md-nav__link> Process Model </a> </li> <li class=md-nav__item> <a href=../../os-spec/synchronization/ class=md-nav__link> Synchronization and Access Control </a> </li> <li class=md-nav__item> <a href=../../os-spec/misc/ class=md-nav__link> Micellaneous </a> </li> <li class=md-nav__item> <a href=../../os-spec/multiuser/ class=md-nav__link> Multi-User Extension to eXpOS </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_1_9 type=checkbox id=__nav_2_2_1_9> <label class=md-nav__link for=__nav_2_2_1_9> Application Programmer's Interface (API) <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Programmer's Interface (API)" data-md-level=4> <label class=md-nav__title for=__nav_2_2_1_9> <span class="md-nav__icon md-icon"></span> Application Programmer's Interface (API) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../os-spec/systemcallinterface/ class=md-nav__link> High Level System Call Interface </a> </li> <li class=md-nav__item> <a href=../../os-spec/dynamicmemoryroutines/ class=md-nav__link> High Level Library Interface </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../os-spec/shell-spec/ class=md-nav__link> eXpOS Shell Specification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_2 type=checkbox id=__nav_2_2_2> <label class=md-nav__link for=__nav_2_2_2> Design <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Design data-md-level=3> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../os-design/ class=md-nav__link> Design </a> </li> <li class=md-nav__item> <a href=../../os-design/misc/ class=md-nav__link> Micellaneous </a> </li> <li class=md-nav__item> <a href=../../os-design/exe-handler/ class=md-nav__link> Exception Handler </a> </li> <li class=md-nav__item> <a href=../../os-design/timer/ class=md-nav__link> Timer </a> </li> <li class=md-nav__item> <a href=../../os-design/disk-interrupt/ class=md-nav__link> Disk Interrupt Handler </a> </li> <li class=md-nav__item> <a href=../../os-design/term-handler/ class=md-nav__link> Terminal Interrupt Handler </a> </li> <li class=md-nav__item> <a href=../../os-design/shutdown/ class=md-nav__link> Shutdown </a> </li> <li class=md-nav__item> <a href=../../os-design/create/ class=md-nav__link> Create </a> </li> <li class=md-nav__item> <a href=../../os-design/delete/ class=md-nav__link> Delete </a> </li> <li class=md-nav__item> <a href=../../os-design/open/ class=md-nav__link> Open </a> </li> <li class=md-nav__item> <a href=../../os-design/close/ class=md-nav__link> Close </a> </li> <li class=md-nav__item> <a href=../../os-design/read/ class=md-nav__link> Read </a> </li> <li class=md-nav__item> <a href=../../os-design/write/ class=md-nav__link> Write </a> </li> <li class=md-nav__item> <a href=../../os-design/seek/ class=md-nav__link> Seek </a> </li> <li class=md-nav__item> <a href=../../os-design/fork/ class=md-nav__link> Fork </a> </li> <li class=md-nav__item> <a href=../../os-design/exec/ class=md-nav__link> Exec </a> </li> <li class=md-nav__item> <a href=../../os-design/exit/ class=md-nav__link> Exit </a> </li> <li class=md-nav__item> <a href=../../os-design/proc-misc/ class=md-nav__link> Process Micellaneous </a> </li> <li class=md-nav__item> <a href=../../os-design/synchronization-algos/ class=md-nav__link> Synchronization Algorithms </a> </li> <li class=md-nav__item> <a href=../../os-design/semaphore-algos/ class=md-nav__link> Semaphore Algorithms </a> </li> <li class=md-nav__item> <a href=../../os-design/multiusersyscalls/ class=md-nav__link> Multi-User System Calls </a> </li> <li class=md-nav__item> <a href=../../os-design/disk-ds/ class=md-nav__link> Disk Data Structures </a> </li> <li class=md-nav__item> <a href=../../os-design/process-table/ class=md-nav__link> Process Table </a> </li> <li class=md-nav__item> <a href=../../os-design/mem-ds/ class=md-nav__link> Memory Data Structures </a> </li> <li class=md-nav__item> <a href=../../os-design/state-diag/ class=md-nav__link> Process State Diagram </a> </li> <li class=md-nav__item> <a href=../../os-design/nexpos/ class=md-nav__link> NeXpOS Design </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3 type=checkbox id=__nav_2_2_3> <label class=md-nav__link for=__nav_2_2_3> Implementation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Implementation data-md-level=3> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> Implementation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../os-implementation/ class=md-nav__link> Implementation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_2_3_2 type=checkbox id=__nav_2_2_3_2> <label class=md-nav__link for=__nav_2_2_3_2> Kernel Stack Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Kernel Stack Management" data-md-level=4> <label class=md-nav__title for=__nav_2_2_3_2> <span class="md-nav__icon md-icon"></span> Kernel Stack Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../os-design/stack-smcall/ class=md-nav__link> During System Calls </a> </li> <li class=md-nav__item> <a href=../../os-design/stack-interrupt/ class=md-nav__link> During Hardware interrupts or exceptions </a> </li> <li class=md-nav__item> <a href=../../os-design/stack-module/ class=md-nav__link> During Module calls </a> </li> <li class=md-nav__item> <a href=../../os-design/timer-stack-management/ class=md-nav__link> During Context Switch </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_1 type=checkbox id=__nav_2_3_1> <label class=md-nav__link for=__nav_2_3_1> Specification <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Specification data-md-level=3> <label class=md-nav__title for=__nav_2_3_1> <span class="md-nav__icon md-icon"></span> Specification </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../arch-spec/ class=md-nav__link> XSM Architecture Specifcation </a> </li> <li class=md-nav__item> <a href=../../virtual-machine-spec/ class=md-nav__link> Virtual Machine Model </a> </li> <li class=md-nav__item> <a href=../../arch-spec/machine-organization/ class=md-nav__link> Machine Organisation </a> </li> <li class=md-nav__item> <a href=../../arch-spec/interrupts-exception-handling/ class=md-nav__link> Interrupts and Exception Handling </a> </li> <li class=md-nav__item> <a href=../../arch-spec/instruction-set/ class=md-nav__link> Instruction Set </a> </li> <li class=md-nav__item> <a href=../../arch-spec/paging-hardware/ class=md-nav__link> Paging Hardware and Address Translation </a> </li> <li class=md-nav__item> <a href=../../arch-spec/nexsm/ class=md-nav__link> NEXSM (Two Core) Architecture Specification </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_2 type=checkbox id=__nav_2_3_2> <label class=md-nav__link for=__nav_2_3_2> Modules <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Modules data-md-level=3> <label class=md-nav__title for=__nav_2_3_2> <span class="md-nav__icon md-icon"></span> Modules </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../modules/ class=md-nav__link> Modules </a> </li> <li class=md-nav__item> <a href=../../modules/module-00/ class=md-nav__link> Module 0 </a> </li> <li class=md-nav__item> <a href=../../modules/module-01/ class=md-nav__link> Module 1 </a> </li> <li class=md-nav__item> <a href=../../modules/module-02/ class=md-nav__link> Module 2 </a> </li> <li class=md-nav__item> <a href=../../modules/module-03/ class=md-nav__link> Module 3 </a> </li> <li class=md-nav__item> <a href=../../modules/module-04/ class=md-nav__link> Module 4 </a> </li> <li class=md-nav__item> <a href=../../modules/module-05/ class=md-nav__link> Module 5 </a> </li> <li class=md-nav__item> <a href=../../modules/module-06/ class=md-nav__link> Module 6 </a> </li> <li class=md-nav__item> <a href=../../modules/module-07/ class=md-nav__link> Module 7 </a> </li> <li class=md-nav__item> <a href=../../modules/module-08/ class=md-nav__link> Module 8 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_3 type=checkbox id=__nav_2_3_3> <label class=md-nav__link for=__nav_2_3_3> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=3> <label class=md-nav__title for=__nav_2_3_3> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/multiuser-implementation/ class=md-nav__link> MultiUser Implementation </a> </li> <li class=md-nav__item> <a href=../../tutorials/filesystem-implementation/ class=md-nav__link> FileSystem Implementation </a> </li> <li class=md-nav__item> <a href=../../tutorials/process-management-implementation/ class=md-nav__link> Process Management Implementation </a> </li> <li class=md-nav__item> <a href=../../tutorials/xsm-instruction-cycle/ class=md-nav__link> XSM Instruction Cycle </a> </li> <li class=md-nav__item> <a href=../../tutorials/xsm-interrupts-tutorial/ class=md-nav__link> XSM Interrupts tutorial </a> </li> <li class=md-nav__item> <a href=../../tutorials/xsm-unprivileged-tutorial/ class=md-nav__link> XSM Unprivileged tutorial </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_4 type=checkbox id=__nav_2_3_4> <label class=md-nav__link for=__nav_2_3_4> Support Tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Support Tools" data-md-level=3> <label class=md-nav__title for=__nav_2_3_4> <span class="md-nav__icon md-icon"></span> Support Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../support-tools/setting-up/ class=md-nav__link> Setting up </a> </li> <li class=md-nav__item> <a href=../../support-tools/docker-setup/ class=md-nav__link> Docker based setup </a> </li> <li class=md-nav__item> <a href=../../support-tools/xfs-interface/ class=md-nav__link> XFS Interface </a> </li> <li class=md-nav__item> <a href=../../support-tools/spl/ class=md-nav__link> SPL </a> </li> <li class=md-nav__item> <a href=../../support-tools/expl/ class=md-nav__link> ExpL </a> </li> <li class=md-nav__item> <a href=../../support-tools/xsm-simulator/ class=md-nav__link> XSM Simulator </a> </li> <li class=md-nav__item> <a href=../../support-tools/constants/ class=md-nav__link> Constants </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3_5 type=checkbox id=__nav_2_3_5> <label class=md-nav__link for=__nav_2_3_5> Application Interface <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Application Interface" data-md-level=3> <label class=md-nav__title for=__nav_2_3_5> <span class="md-nav__icon md-icon"></span> Application Interface </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../abi/ class=md-nav__link> Application Binary Interface (ABI) </a> </li> <li class=md-nav__item> <a href=../../os-design/sw-interface/ class=md-nav__link> Low Level System Call Interface </a> </li> <li class=md-nav__item> <a href=../../os-spec/dynamicmemoryroutines/ class=md-nav__link> High Level Library Interface </a> </li> <li class=md-nav__item> <a href=../../abi/ class=md-nav__link> Low Level Library Interface </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> Others <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Others data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Others </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4_1 type=checkbox id=__nav_2_4_1> <label class=md-nav__link for=__nav_2_4_1> Test Programs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Test Programs" data-md-level=3> <label class=md-nav__title for=__nav_2_4_1> <span class="md-nav__icon md-icon"></span> Test Programs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../test-programs/ class=md-nav__link> Test Programs </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-01/ class=md-nav__link> Program 1 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-02/ class=md-nav__link> Program 2 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-03/ class=md-nav__link> Program 3 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-04/ class=md-nav__link> Program 4 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-05/ class=md-nav__link> Program 5 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-06/ class=md-nav__link> Program 6 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-07/ class=md-nav__link> Program 7 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-08/ class=md-nav__link> Program 8 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-09/ class=md-nav__link> Program 9 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-10/ class=md-nav__link> Program 10 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-11/ class=md-nav__link> Program 11 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-12/ class=md-nav__link> Program 12 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-13/ class=md-nav__link> Program 13 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-14/ class=md-nav__link> Program 14 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-15/ class=md-nav__link> Program 15 </a> </li> <li class=md-nav__item> <a href=../../test-programs/test-program-16/ class=md-nav__link> Program 16 </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Roadmap <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Roadmap data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Roadmap </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Roadmap </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> Preparatory Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Preparatory Stages" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Preparatory Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../stage-01/ class=md-nav__link> Stage 1 </a> </li> <li class=md-nav__item> <a href=../stage-02/ class=md-nav__link> Stage 2 </a> </li> <li class=md-nav__item> <a href=../stage-03/ class=md-nav__link> Stage 3 </a> </li> <li class=md-nav__item> <a href=../stage-04/ class=md-nav__link> Stage 4 </a> </li> <li class=md-nav__item> <a href=../stage-05/ class=md-nav__link> Stage 5 </a> </li> <li class=md-nav__item> <a href=../stage-06/ class=md-nav__link> Stage 6 </a> </li> <li class=md-nav__item> <a href=../stage-07/ class=md-nav__link> Stage 7 </a> </li> <li class=md-nav__item> <a href=../stage-08/ class=md-nav__link> Stage 8 </a> </li> <li class=md-nav__item> <a href=../stage-09/ class=md-nav__link> Stage 9 </a> </li> <li class=md-nav__item> <a href=../stage-10/ class=md-nav__link> Stage 10 </a> </li> <li class=md-nav__item> <a href=../stage-11/ class=md-nav__link> Stage 11 </a> </li> <li class=md-nav__item> <a href=../stage-12/ class=md-nav__link> Stage 12 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Intermediate Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Intermediate Stages" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Intermediate Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../stage-13/ class=md-nav__link> Stage 13 </a> </li> <li class=md-nav__item> <a href=../stage-14/ class=md-nav__link> Stage 14 </a> </li> <li class=md-nav__item> <a href=../stage-15/ class=md-nav__link> Stage 15 </a> </li> <li class=md-nav__item> <a href=../stage-16/ class=md-nav__link> Stage 16 </a> </li> <li class=md-nav__item> <a href=../stage-17/ class=md-nav__link> Stage 17 </a> </li> <li class=md-nav__item> <a href=../stage-18/ class=md-nav__link> Stage 18 </a> </li> <li class=md-nav__item> <a href=../stage-19/ class=md-nav__link> Stage 19 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4 checked> <label class=md-nav__link for=__nav_3_4> Final Stages <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Final Stages" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Final Stages </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../stage-20/ class=md-nav__link> Stage 20 </a> </li> <li class=md-nav__item> <a href=../stage-21/ class=md-nav__link> Stage 21 </a> </li> <li class=md-nav__item> <a href=../stage-22/ class=md-nav__link> Stage 22 </a> </li> <li class=md-nav__item> <a href=../stage-23/ class=md-nav__link> Stage 23 </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Stage 24 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Stage 24 </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#interrupt-routine-5 class=md-nav__link> Interrupt routine 5 </a> <nav class=md-nav aria-label="Interrupt routine 5"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#open-system-call class=md-nav__link> Open system call </a> </li> <li class=md-nav__item> <a href=#close-system-call class=md-nav__link> Close system call </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#open-function-number-3-file-manager-module class=md-nav__link> Open (function number = 3, file manager module ) </a> </li> <li class=md-nav__item> <a href=#close-function-number-4-file-manager-module class=md-nav__link> Close (function number = 4, file manager module ) </a> </li> <li class=md-nav__item> <a href=#modifications-to-fork-system-call class=md-nav__link> Modifications to Fork system call </a> </li> <li class=md-nav__item> <a href=#modifications-to-free-user-area-page-function-number-2-process-manager-module class=md-nav__link> Modifications to Free User Area Page (function number = 2, process manager module ) </a> </li> <li class=md-nav__item> <a href=#interrupt-routine-6-read-system-call class=md-nav__link> Interrupt routine 6 ( Read system call) </a> <nav class=md-nav aria-label="Interrupt routine 6 ( Read system call)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#read-system-call class=md-nav__link> Read system call </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#buffered-read-function-number-2-file-manager-module class=md-nav__link> Buffered Read (function number = 2, file manager module ) </a> </li> <li class=md-nav__item> <a href=#acquire-buffer-function-number-1-resource-manager-module class=md-nav__link> Acquire Buffer (function number = 1, resource manager module ) </a> </li> <li class=md-nav__item> <a href=#release-buffer-function-number-2-resource-manager-module class=md-nav__link> Release Buffer (function number = 2, resource manager module ) </a> </li> <li class=md-nav__item> <a href=#modifications-to-boot-module class=md-nav__link> Modifications to boot module </a> </li> <li class=md-nav__item> <a href=#making-things-work class=md-nav__link> Making things work </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../stage-25/ class=md-nav__link> Stage 25 </a> </li> <li class=md-nav__item> <a href=../stage-26/ class=md-nav__link> Stage 26 </a> </li> <li class=md-nav__item> <a href=../stage-27/ class=md-nav__link> Stage 27 </a> </li> <li class=md-nav__item> <a href=../stage-28/ class=md-nav__link> Stage 28 </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> FAQ </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Student Feedback <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Student Feedback" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Student Feedback </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../feedback/ class=md-nav__link> Student Feedback </a> </li> <li class=md-nav__item> <a href=../../feedback/nitc21/ class=md-nav__link> NIT-C 2021 </a> </li> <li class=md-nav__item> <a href=../../feedback/nitc20/ class=md-nav__link> NIT-C 2020 </a> </li> <li class=md-nav__item> <a href=../../feedback/nitc19/ class=md-nav__link> NIT-C 2019 </a> </li> <li class=md-nav__item> <a href=../../feedback/iitpkd18/ class=md-nav__link> IIT PKD 2018 </a> </li> <li class=md-nav__item> <a href=../../feedback/nitc18/ class=md-nav__link> NIT-C 2018 </a> </li> <li class=md-nav__item> <a href=../../feedback/analysis/ class=md-nav__link> Analysis of Student Feedback </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://exposnitc.github.io/user-contrib/ target=_blank class=md-nav__link> User Contributions </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> About </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../reports/ class=md-nav__link> Project Reports </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=http://xosnitc.github.io target=_blank class=md-nav__link> XOS </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#interrupt-routine-5 class=md-nav__link> Interrupt routine 5 </a> <nav class=md-nav aria-label="Interrupt routine 5"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#open-system-call class=md-nav__link> Open system call </a> </li> <li class=md-nav__item> <a href=#close-system-call class=md-nav__link> Close system call </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#open-function-number-3-file-manager-module class=md-nav__link> Open (function number = 3, file manager module ) </a> </li> <li class=md-nav__item> <a href=#close-function-number-4-file-manager-module class=md-nav__link> Close (function number = 4, file manager module ) </a> </li> <li class=md-nav__item> <a href=#modifications-to-fork-system-call class=md-nav__link> Modifications to Fork system call </a> </li> <li class=md-nav__item> <a href=#modifications-to-free-user-area-page-function-number-2-process-manager-module class=md-nav__link> Modifications to Free User Area Page (function number = 2, process manager module ) </a> </li> <li class=md-nav__item> <a href=#interrupt-routine-6-read-system-call class=md-nav__link> Interrupt routine 6 ( Read system call) </a> <nav class=md-nav aria-label="Interrupt routine 6 ( Read system call)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#read-system-call class=md-nav__link> Read system call </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#buffered-read-function-number-2-file-manager-module class=md-nav__link> Buffered Read (function number = 2, file manager module ) </a> </li> <li class=md-nav__item> <a href=#acquire-buffer-function-number-1-resource-manager-module class=md-nav__link> Acquire Buffer (function number = 1, resource manager module ) </a> </li> <li class=md-nav__item> <a href=#release-buffer-function-number-2-resource-manager-module class=md-nav__link> Release Buffer (function number = 2, resource manager module ) </a> </li> <li class=md-nav__item> <a href=#modifications-to-boot-module class=md-nav__link> Modifications to boot module </a> </li> <li class=md-nav__item> <a href=#making-things-work class=md-nav__link> Making things work </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <!-- Edit button --> <a href=https://github.com/eXpOSNitc/expos-docs/edit/main/docs/roadmap/stage-24.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <!--
    Hack: check whether the content contains a h1 headline. If it
    doesn't, the page title (or respectively site name) is used
    as the main headline.
    --> <h1>Stage 24 : File Read (12 Hours)</h1> <!-- Markdown content --> <div class="admonition note"> <p class=admonition-title>Learning Objectives</p> <ul> <li>Understanding buffer cache.</li> <li>Implementation of <em>Open</em> , <em>Close</em> and <em>Read</em> system calls.</li> </ul> </div> <div class="admonition abstract"> <p class=admonition-title>Pre-requisite Reading</p> <p>Description of data structures - <a href=../../os-design/mem-ds/#file-inode-status-table>File(inode) status table</a> , <a href=../../os-design/mem-ds/#buffer-table>Buffer table</a> , <a href=../../os-design/mem-ds/#open-file-table>Open file table</a> and <a href=../../os-design/process-table/#per-process-resource-table>per-process resource table</a>.</p> </div> <p>In this stage, we will understand the mechanism of opening and closing a file with the help of <em>Open</em> and <em>Close</em> system calls. We will also understand how contents of a file can be read by using <em>Read</em> system call. <em>Fork</em> system call and <strong>Free User Area Page</strong> function of process manager module are also modified in this stage.</p> <h4 id=interrupt-routine-5>Interrupt routine 5<a class=headerlink href=#interrupt-routine-5 title="Permanent link">&para;</a></h4> <p>The system calls <em>Open</em> and <em>Close</em> are implemented in the interrupt routine 5. <em>Open</em> and <em>Close</em> have system call numbers 2 and 3 respectively. From ExpL programs, these system calls are called using <a href=../../os-spec/dynamicmemoryroutines/ >exposcall function</a> .</p> <figure> <img src=../../assets/img/roadmap/open_close.png> <figcaption>Control flow for <i>Open</i> and <i>Close</i> system calls</figcaption> </figure> <h5 id=open-system-call>Open system call<a class=headerlink href=#open-system-call title="Permanent link">&para;</a></h5> <p><em>Open</em> system call takes a filename as an argument from the user program. To perform read/write operations on a file, a process must open the file first. <em>Open</em> system call creates a new <strong>open instance</strong> for the file and returns a <strong>file descriptor</strong> (index of the new <a href=../../os-design/process-table/#per-process-resource-table>per-process resource table</a> entry created for the open instance). Further operations on the open instance are performed using this file descriptor. A process can open a file several times and each time a different open instance (and new descriptor) is created. The global data structure, <a href=../../os-design/mem-ds/#open-file-table>Open file table</a> keeps track of all the open file instances in the system. (A new entry is created in this table whenever the <em>Open</em> system call is invoked with any file name.) <a href=../../os-design/mem-ds/#file-inode-status-table>File status table</a> is a global data structure that maintains an entry for every file in the system (not just opened files).</p> <p><em>Open</em> system call creates new entries for the file to be opened in the per-process resource table and the open file table. A process keeps track of an open instance by storing the index of the open file table entry of the instance in (the corresponding) resource table entry. When a file is opened, the OPEN INSTANCE COUNT in the open file table is set to 1 and <strong>seek</strong> position is initialized to the starting of the file (0).</p> <p>Each time when a file is opened, the FILE OPEN COUNT in the file status table entry for the file is incremented by one. <em>Open</em> system call invokes <strong>Open</strong> function of <a href=../../modules/module-03/ >file manager module</a> to deal with global data structures - <a href=../../os-design/mem-ds/#file-inode-status-table>file status table</a> and <a href=../../os-design/mem-ds/#open-file-table>open file table</a> . When a process executes a <em>Fork</em> system call, the open instances of files (and semaphores) created by the process are shared between the current process and its child. As an effect of <em>Fork</em> , the OPEN INSTANCE COUNT in the open file table entry corresponding to the open instance is incremented by one.</p> <p>It is necessary not to be confused between FILE OPEN COUNT (in the file status table) and OPEN INSTANCE COUNT (in the open file table). The former keeps track of the global count of how many times <em>Open</em> system call has been invoked with each file in the system - that is the number of open instances of a file at a given point of time. This count is decremented each time when a <em>Close</em> is invoked on the file by any process. Each open instance could be further <strong>shared</strong> between multiple processes (via <em>Fork</em> ). OPEN INSTANCE COUNT value of a particular open instance essentially keeps track of this "share count".</p> <p>Implement <em>Open</em> system call using the detailed algorithm provided <a href=../../os-design/open/ >here</a> .</p> <h5 id=close-system-call>Close system call<a class=headerlink href=#close-system-call title="Permanent link">&para;</a></h5> <p>When a process no longer needs to perform read/write operations on an open instance of a file, the open instance may be closed using the <em>Close</em> system call. Even if a process does not explicitly close an open instance by invoking <em>Close</em> system call, the open instance is closed at the termination of the process by <em>Exit</em> system call.</p> <p><em>Close</em> system call takes a file descriptor (index of the <a href=../../os-design/process-table/#per-process-resource-table>per-process resource table</a> entry) as argument from the user program. <em>Close</em> system call invalidates the per-process resource table entry (corresponding to given file descriptor) by storing -1 in the Resource Identifier field. To decrement share count of the open instance in the <a href=../../os-design/mem-ds/#open-file-table>open file table</a> and update the <a href=../../os-design/mem-ds/#file-inode-status-table>file status table</a> accordingly, <strong>Close</strong> function of <a href=../../modules/module-03/ >file manager module</a> is invoked by the <em>Close</em> system call.</p> <p>Implement <em>Close</em> system call using the detailed algorithm provided <a href=../../os-design/close/ >here</a> .</p> <h4 id=open-function-number-3-file-manager-module><strong>Open (function number = 3, <a href=../../modules/module-03/ >file manager module</a> )</strong><a class=headerlink href=#open-function-number-3-file-manager-module title="Permanent link">&para;</a></h4> <p><strong>Open</strong> function is invoked by <em>Open</em> system call to update the <a href=../../os-design/mem-ds/#file-inode-status-table>file status table</a> and the <a href=../../os-design/mem-ds/#open-file-table>open file table</a> when a file is opened. Open takes a file name as an argument. This function locates the inode index for the file in the <a href=../../os-design/disk-ds/#inode-table>inode table</a> and <strong>locks the inode</strong> before proceeding further. <strong>Acquire Inode</strong> function of <a href=../../modules/module-00/ >resource manager module</a> is invoked to lock the file. Locking the file is necessary to make sure that no other process tries to delete the file concurrently. Open function creates a new entry in the open file table and returns the index of this entry to the caller. (Note that this index recieved as return value is stored in the per-process resource table entry by the <em>Open</em> system call.) All the fields of the open file table entry are initialized. In case the file is "root" file, INODE INDEX field is initialized to the <a href=../../support-tools/constants/ >INODE_ROOT</a> (0). Open function increments the FILE OPEN COUNT field by one in the file status table entry for the file, except if the file is "root" file. (FILE OPEN COUNT is irrelevent for the root file as the root file is pre-loaded into the memory at boot time and can never be deleted.) The lock on the file is released by invoking <strong>Release Inode</strong> function of <a href=../../modules/module-00/ >resource manager module</a> before returning to the caller.</p> <p>Implement <em>Open</em> function using the detailed algorithm given in the file manager module link above.</p> <h4 id=close-function-number-4-file-manager-module><strong>Close (function number = 4, <a href=../../modules/module-03/ >file manager module</a> )</strong><a class=headerlink href=#close-function-number-4-file-manager-module title="Permanent link">&para;</a></h4> <p><strong>Close</strong> function is invoked by the <em>Close</em> system call to update the <a href=../../os-design/mem-ds/#file-inode-status-table>file status table</a> and the <a href=../../os-design/mem-ds/#open-file-table>open file table</a> when a file is closed. Close takes an open file table index as argument. <em>Close</em> function decrements the share count (i.e OPEN INSTANCE COUNT field in the <a href=../../os-design/mem-ds/ >open file table</a> entry) as the process no longer shares the open instance of the file. When the share count becomes zero, this indicates that all processes sharing that open instance of the file have closed the file. Hence, open file table entry corresponding to that open instance of the file is invalidated by setting the INODE INDEX field to -1 and the open count of the file (FILE OPEN COUNT field in <a href=../../os-design/mem-ds/#file-inode-status-table>file status table</a> entry) is decremented.</p> <p>Implement <em>Close</em> function using the detailed algorithm given in the file manager module link above.</p> <h4 id=modifications-to-fork-system-call><strong>Modifications to <em>Fork</em> system call</strong><a class=headerlink href=#modifications-to-fork-system-call title="Permanent link">&para;</a></h4> <p>There is a simple modification required to the <em>Fork</em> System call. When a process forks to create a child process, the file instances currently opened by the parent are now shared between child and parent. To reflect this change, the OPEN INSTANCE COUNT field in the <a href=../../os-design/mem-ds/#open-file-table>open file table</a> is incremented for each open file instance in the per-process resource table of parent process.</p> <ul> <li>While Copying the <a href=../../os-design/process-table/#per-process-resource-table>per-process resource table</a> of parent to the child process do following -</li> <li>If the resource is a file (check the Resource Identifier field in the per-process resource table), then using the open file table index, increment the OPEN INSTANCE COUNT field in the <a href=../../os-design/mem-ds/#open-file-table>open file table</a> entry. /*The change in <em>Fork</em> system call to update the <a href=../../os-design/mem-ds/#semaphore-table>semaphore table</a> , is already done in stage 22*/</li> </ul> <h4 id=modifications-to-free-user-area-page-function-number-2-process-manager-module><strong>Modifications to Free User Area Page (function number = 2, <a href=../../modules/module-01/ >process manager module</a> )</strong><a class=headerlink href=#modifications-to-free-user-area-page-function-number-2-process-manager-module title="Permanent link">&para;</a></h4> <p>When a process terminates, all the files the process has opened (and haven't closed explicitly) have to be closed. This is done in the Free User Area page function. The <strong>Close</strong> function of the <a href=../../modules/module-03/ >file manager module</a> is invoked for every open file in the per-process resource table of the process.</p> <ul> <li>For each entry in the <a href=../../os-design/process-table/#per-process-resource-table>per-process resource table</a> of the process, do following -</li> <li>If the resource is valid and is file (check the Resource Identifier field in the per-process resource table), then invoke the Close function of the <a href=../../modules/module-03/ >file manager module</a> . /*The change in the Free User Area Page to release the unrelased semaphores is already done in stage 22*/</li> </ul> <p><code>Note :</code> The implementation of <strong><em>Open</em></strong> , <strong><em>Close</em></strong> , <strong><em>Fork</em></strong> system calls and <strong>Open</strong> , <strong>Close</strong> , <strong>Free User Area Page</strong> functions are final.</p> <h4 id=interrupt-routine-6-read-system-call>Interrupt routine 6 ( <em>Read</em> system call)<a class=headerlink href=#interrupt-routine-6-read-system-call title="Permanent link">&para;</a></h4> <p>Interrupt routine 6 written in stage 16 reads data (words) only from the terminal. In this stage, <em>Read</em> system call is modified to read data from files. <em>Read</em> system call has system call number 7. From ExpL programs, <em>Read</em> system call is called using <a href=../../os-spec/dynamicmemoryroutines/ >exposcall function</a> .</p> <figure> <img src=../../assets/img/roadmap/FileRead.png> <figcaption>Control flow for reading a word from a file </figcaption> </figure> <h5 id=read-system-call><strong><em>Read</em> system call</strong><a class=headerlink href=#read-system-call title="Permanent link">&para;</a></h5> <p><em>Read</em> system call takes as input a file descriptor and the address of a word into which data should be read. <em>Read</em> system call locks the inode (corresponding to the file descriptor) at the beginning of the system call and releases the lock at the end of the system call. The functions <strong>Acquire Inode</strong> and <strong>Release Inode</strong> of <a href=../../modules/module-00/ >resource manager module</a> are used to lock and release the inode respectively.</p> <p><em>Read</em> system call reads the word at the position pointed to by the value of LSEEK (in the <a href=../../os-design/mem-ds/#open-file-table>open file table</a> entry) and stores it into the memory address provided as input. After reading the word from the file, LSEEK is incremented by one.</p> <p>As file data is stored in the disk blocks allocated to the file, in order to read from position pointed to by LSEEK, the disk block containing the word pointed to by LSEEK has to be loaded first into the memory. eXpOS maintains a <strong>buffer cache</strong> (see <a href=../../os-implementation/ >memory organization</a> )that can store up to four disk blocks in memory simultaneously. The cache pages are numbered 0,1,2 and 3 and are stored in memory pages 71, 72, 73 and 74. The simple caching scheme we user here is the following. If we want to bring disk block <em>N</em> into memory, the cache page <em>N mod 4</em> will be used. Hence, if the disk block number to be loaded is - say 195 - then the cache page number to which the block will be noded is 3 and hence, the block will be loaded to page number 74. The functions <strong>Buffered Read</strong> and <strong>Buffered Write</strong> of the <a href=../../modules/module-03/ >file manager module</a> are designed to handle buffer management. <em>Read</em> invokes <strong>Buffered Read</strong> function to bring the required disk block into the memory buffer and read the word present at position LSEEK.</p> <p><strong>Reading from the root file does not require a buffer, as root file is already loaded into the memory at boot-time.</strong> Memory copy of the root file is present in memory page 62 and the start address of this page is denoted by the SPL constant <a href=../../support-tools/constants/ >ROOT_FILE</a> . The word in the root file at LSEEK position is copied into the address provided. Note that the memory address provided as argument is a logical address, and as system call runs in kernel mode logical address should be translated to physical address before storing data.</p> <p><em>Read</em> system call needs to lock the resources - Inode (file), buffer and disk before using them. These are locked in the order 1) Inode 2) buffer and 3) disk and released in the reverse order. This order is also followed while writing to a file. Ordering of resource acquisition is imposed in order to avoid processes getting into <strong>circular wait</strong> for resources. Avoiding circular wait prevents <a href=https://en.wikipedia.org/wiki/Deadlock>deadlocks</a> .</p> <p>Implement <em>Read</em> system call using detailed algorithm provided <a href=../../os-design/read/ >here</a> .</p> <h4 id=buffered-read-function-number-2-file-manager-module><strong>Buffered Read (function number = 2, <a href=../../modules/module-03/ >file manager module</a> )</strong><a class=headerlink href=#buffered-read-function-number-2-file-manager-module title="Permanent link">&para;</a></h4> <p><strong>Buffered Read</strong> takes as input 1) a disk block number, 2) an offset value and 3) a physical memory address. The task of Buffered read is to read a word at position specified by the offset within the given disk block and store it into the given <strong>physical</strong> memory address. To read a word from a disk block, it has to be present in the memory. <strong><a href=../../tutorials/filesystem-implementation/#4-memory-buffer-cache>Memory buffer cache</a></strong> is used for this purpose. The disk block is loaded (if not loaded already) into the buffer page with buffer number given by formula - <em>(disk block number%4)</em> .</p> <p>To use a buffer page, it has to be locked first by invoking <strong>Acquire Buffer</strong> function of <a href=../../modules/module-00/ >resource manager module</a> . To load a disk block into a memory buffer page, <strong>Buffered Read</strong> invokes the function <strong>Disk Load</strong> of the <a href=../../modules/module-04/ >device manager module</a> . After loading the given disk block into the corresponding buffer, the word present at the given offset in the memory buffer is copied into the address given as argument.</p> <p>The buffer page to which a disk block has to be loaded may contain some other disk block. In such case, if the buffer page has been modified earlier ( <strong>dirty bit</strong> in the buffer table is set), the disk block present in the buffer has to be stored back into the disk before loading a new disk block. To store a disk block back into the disk, Buffered Read invokes <strong>Disk Store</strong> function of device manager module.</p> <p>After completion of the read operation, Buffered Read unlocks the buffer page by invoking <strong>Release Buffer</strong> function of resource manager module . Now that the buffer is unlocked, other processes are allowed to use the buffer.</p> <p>Implement Buffered Read function using the detailed algorithm given in the file manager module link above.</p> <h4 id=acquire-buffer-function-number-1-resource-manager-module><strong>Acquire Buffer (function number = 1, <a href=../../modules/module-00/ >resource manager module</a> )</strong><a class=headerlink href=#acquire-buffer-function-number-1-resource-manager-module title="Permanent link">&para;</a></h4> <p><strong>Acquire Buffer</strong> takes a buffer number and PID of a process as arguments. This function is invoked by the <strong>Buffered Read</strong> and <strong>Buffered Write</strong> functions of the <a href=../../modules/module-03/ >file manager module</a> to lock a buffer before its use. A process needs to acquire a buffer before accessing it to prevent data inconsistency that may arise if other processes are allowed to access the buffer concurrently.</p> <p>Acquire Buffer locks a buffer by storing the given PID in the LOCKING PID field of the <a href=../../os-design/mem-ds/#buffer-table>buffer table</a> entry corresponding to the given buffer number. If the required buffer is locked by some other process (some other process has set the LOCKING PID), then the process with the given PID is blocked ( <a href=../../os-design/process-table/#state>STATE</a> is changed to (WAIT_BUFFER, buffer number) in the <a href=../../os-design/process-table/ >process table</a> ). The process waits in the blocked state, until the required buffer is free. When the process which has acquired the buffer releases the buffer by invoking <strong>Release Buffer</strong> function (described next), the state of this blocked process is made READY and <strong>Acquire Buffer</strong> attempts to lock the buffer again.</p> <p>Implement Acquire Buffer function using the detailed algorithm given in the resource manager module link above.</p> <h4 id=release-buffer-function-number-2-resource-manager-module><strong>Release Buffer (function number = 2, <a href=../../modules/module-00/ >resource manager module</a> )</strong><a class=headerlink href=#release-buffer-function-number-2-resource-manager-module title="Permanent link">&para;</a></h4> <p>A process uses the <strong>Release Buffer</strong> function to release a buffer page that it has acquired earlier.</p> <p><strong>Release Buffer</strong> takes as input the number of a buffer page to be released and the PID of a process. Release Buffer function invalidates the LOCKING PID field (store -1) in the buffer table entry corresponding to the given buffer number. Release Buffer also wakes up all processes waiting for the buffer with given buffer number by changing the STATE in the <a href=../../os-design/process-table/ >process table</a> from tuple (WAIT_BUFFER, buffer number) to READY.</p> <p>Implement Release Buffer function using the detailed algorithm given in the resource manager module link above.</p> <div class="admonition note"> <p class=admonition-title>Note<p>The implementation of <strong><em>Read</em></strong> system call and <strong>Buffered Read</strong> , <strong>Acquire Buffer</strong> , <strong>Release Buffer</strong> functions are final.</p> </p> </div> <h4 id=modifications-to-boot-module>Modifications to boot module<a class=headerlink href=#modifications-to-boot-module title="Permanent link">&para;</a></h4> <ul> <li>Load interrupt routine 5 and module 3 from the disk to the memory. See the memory organization <a href=../../os-implementation/ >here</a> .</li> <li>Initialize all entries of the <a href=../../os-design/mem-ds/#open-file-table>open file table</a> by setting INODE INDEX field to -1 and OPEN INSTANCE COUNT field to 0.</li> </ul> <h4 id=making-things-work>Making things work<a class=headerlink href=#making-things-work title="Permanent link">&para;</a></h4> <p>Compile and load the newly written/modified files to the disk using XFS-interface.</p> <div class="admonition assignment"> <p class=admonition-title>Assignment 1</p> <p>Write an ExpL program to take file name as input from the console, read the contents of the file and print to the console. Run this program using shell. Load external data files needed for the program using XFS-interface, as at present eXpOS does not support writing to a file. Check the program with following data files as input - 1) sample.dat from stage 2, 2) "numbers.dat" containing numbers 1 to 2047 separated by new line. (You may write a C program to generate the file "numbers.dat".) </p> </div> <div class="admonition assignment"> <p class=admonition-title>Assignment 2</p> <p>Run the program provided <a href=../../test-programs/#test-program-5>here</a> using shell. Use data files from previous question as input. The program takes name of a data file as input and opens the file first. It then forks to create child process. The content of the file with shared open instance (shared LSEEK) will be printed to the terminal concurrently by parent and child. A semaphore is used to synchronize the use of the open instance between parent and child.</p> </div> <!-- Last update of source file --> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../stage-23/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Stage 23" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Stage 23 </div> </div> </a> <a href=../stage-25/ class="md-footer__link md-footer__link--next" aria-label="Next: Stage 25" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Stage 25 </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> National Insititute of Technology, Calicut <br> <a href=https://creativecommons.org/licenses/by-nc/4.0/ rel=license> <img alt="Creative Commons License" style=border-width:0 src=https://licensebuttons.net/l/by-nc/4.0/80x15.png> </a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/exposnitc target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://groups.google.com/g/xos-users target=_blank rel=noopener title=groups.google.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 488 512"><path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.ddd52ceb.min.js></script> </body> </html>